language: java

services:
  - docker
  
jdk: oraclejdk8


before_install:
  - echo $TRAVIS_COMMIT
  - echo $TRAVIS_TAG
  - echo $TRAVIS_BRANCH
  - echo $TRAVIS_BUILD_NUMBER
  - echo $TRAVIS_REPO_SLUG
  - curl https://cli-assets.heroku.com/install.sh | sh
  - heroku --version

addons:
  sonarcloud:
    organization: "arnotjevleesch-github" # the key of the org you chose at step #3
    token:
      secure: $SONAR # encrypted value of your token
      
script:
 # - sonar-scanner
 - docker build -t petclic:$TRAVIS_BUILD_NUMBER .
 - heroku container:login
 - heroku container:release petclic:$TRAVIS_BUILD_NUMBER --app igci-petclinic
